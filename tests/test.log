[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from C1
[ RUN      ] C1.c_tcpshort
[TRACE][4603467200][0][../mt_thread.cpp][336 ][InitialPool]max_num : 50000, size : 5
[TRACE][4603467200][3][../include/mt_frame.h][375 ][SetActiveThread]SetActiveThread : 0x7fe168d03530
[TRACE][4603467200][3][mt_server_unittest.cpp][113 ][TestBody  ]============= init ret : 0 =============
[TRACE][4603467200][3][../include/mt_frame.h][167 ][SetHookFlag]set hook ...
[TRACE][4603467200][3][../mt_sys_hook.cpp][70  ][mt_socket ]system func : socket
[TRACE][4603467200][3][../mt_sys_hook.cpp][309 ][mt_fcntl  ]system func : fcntl
[TRACE][4603467200][3][../mt_sys_hook.cpp][341 ][mt_ioctl  ]system func : ioctl
[TRACE][4603467200][3][../mt_connection.cpp][167 ][CreateSocket]m_ev_ : 0x7fe168d049d0
[TRACE][4603467200][3][../mt_action.cpp][642 ][Loop      ]m_listen_fd_ : 4
[TRACE][4603467200][3][../mt_core.cpp][212 ][AddEventer]AddEventer old_ev: 0x0, ev: 0x7fe168d049d0
[TRACE][4603467200][3][../mt_core.cpp][301 ][AddFd     ]fd : 4, events: 1
[TRACE][4603467200][3][../mt_core.cpp][139 ][AddList   ]ev add success ev: 0x7fe168d049d0, fd: 4
[DEBUG][4603467200][3][../include/mt_heap.h][138 ][HeapPush  ]index : 1
[TRACE][4603467200][3][../include/mt_frame.h][184 ][ThreadSchedule]DaemonThread
[TRACE][4603467200][3][../include/mt_frame.h][192 ][ThreadSchedule]thread: 0x7fe168d030e0, m_run_list_ size: 0, m_io_list_ size: 1, m_pend_list_ size: 0
[TRACE][4603467200][3][../include/mt_frame.h][193 ][ThreadSchedule]SetActiveThread thread: 0x7fe168d030e0
[TRACE][4603467200][2][../include/mt_frame.h][375 ][SetActiveThread]SetActiveThread : 0x7fe168d030e0
[TRACE][4603467200][2][../mt_thread.cpp][262 ][RestoreContext]this : 0x7fe168d030e0, switch_thread : 0x7fe168d03530
[TRACE][4603467200][2][../mt_thread.cpp][269 ][RestoreContext]================= run thread =================[0x7fe168d030e0]
[TRACE][4603467200][2][../mt_thread.cpp][273 ][RestoreContext]contextswitch: (0x7fe168d03530,0x7fe168d03608) -> (0x7fe168d030e0,0x7fe168d031b8)
[TRACE][4603467200][2][../mt_thread.cpp][23  ][StartActiveThread]StartActiveThread: 0x7fe168d030e0, t: 0x7fe168d031a0, id: 2
[TRACE][4603467200][2][../mt_thread.cpp][282 ][Run       ]Run begin......
[TRACE][4603467200][2][../include/mt_frame.h][979 ][DaemonRun ]daemon: 0x7fe168d030e0
[TRACE][4603467200][2][../mt_core.cpp][403 ][Dispatch  ]wait_time: 0 ms
[TRACE][4603467200][2][../include/mt_event_kqueue.h][155 ][ApiPoll   ]retval: 1, tvp: 0x0, m_events_: 0x10d190000, m_size_: 50000
[TRACE][4603467200][2][../include/mt_event_kqueue.h][171 ][ApiPoll   ]m_fired_[j].fd : 4, mask : 1
[TRACE][4603467200][2][../mt_core.cpp][419 ][Dispatch  ]wait poll nfd: 1
[TRACE][4603467200][2][../mt_core.cpp][14  ][InputNotify]InputNotify ..., thread : 0x7fe168d03530
[TRACE][4603467200][2][../include/mt_frame.h][215 ][RemoveIoWait]remove thread: 0x7fe168d03530, m_io_list_ size: 1
[TRACE][4603467200][2][../mt_core.cpp][379 ][DisposeEventerList]ST_READABLE osfd: 4, ret: 0 ev_fdnum: 1
[TRACE][4603467200][2][../include/mt_frame.h][989 ][DaemonRun ]system ms: 1540891581172
[TRACE][4603467200][2][../include/mt_frame.h][352 ][WakeupTimeout]thread GetWakeupTime: 0
[TRACE][4603467200][2][../include/mt_frame.h][323 ][CheckExpired]m_timer_ : 0x7fe168d04670
[TRACE][4603467200][2][../include/mt_heap_timer.h][104 ][CheckExpired]before : now_ms = 1540891581172, size = 0
[TRACE][4603467200][2][../include/mt_heap_timer.h][112 ][CheckExpired]after : size = 0
[TRACE][4603467200][2][../include/mt_frame.h][192 ][ThreadSchedule]thread: 0x7fe168d03530, m_run_list_ size: 0, m_io_list_ size: 0, m_pend_list_ size: 0
[TRACE][4603467200][2][../include/mt_frame.h][193 ][ThreadSchedule]SetActiveThread thread: 0x7fe168d03530
[TRACE][4603467200][3][../include/mt_frame.h][375 ][SetActiveThread]SetActiveThread : 0x7fe168d03530
[TRACE][4603467200][3][../mt_thread.cpp][262 ][RestoreContext]this : 0x7fe168d03530, switch_thread : 0x7fe168d030e0
[TRACE][4603467200][3][../mt_thread.cpp][269 ][RestoreContext]================= run thread =================[0x7fe168d03530]
[TRACE][4603467200][3][../mt_thread.cpp][273 ][RestoreContext]contextswitch: (0x7fe168d030e0,0x7fe168d031b8) -> (0x7fe168d03530,0x7fe168d03608)
[TRACE][4603467200][3][../mt_thread.cpp][277 ][RestoreContext]Thread Dispatch ...[0x7fe168d030e0]
[TRACE][4603467200][3][../mt_core.cpp][461 ][Schedule  ]thread: 0x7fe168d03530
[TRACE][4603467200][3][../mt_core.cpp][468 ][Schedule  ]GetRecvEvents: 1, GetEvents: 1, fd: 4
[TRACE][4603467200][3][../mt_core.cpp][267 ][DelEventer]DelEventer old_ev: 0x7fe168d049d0, ev: 0x7fe168d049d0
[TRACE][4603467200][3][../mt_core.cpp][325 ][DelRef    ]fd: 4, events: 0
[TRACE][4603467200][3][../mt_core.cpp][483 ][Schedule  ]recv_num: 1
[TRACE][4603467200][3][../mt_sys_hook.cpp][364 ][mt_accept ]system func : accept
[TRACE][4603467200][3][../mt_action.cpp][696 ][Loop      ]m_listen_fd_: 4, accept fd: 5
[TRACE][4603467200][3][../mt_action.cpp][717 ][Loop      ]mt_accept ...
[TRACE][4603467200][3][../mt_core.cpp][267 ][DelEventer]DelEventer old_ev: 0x7fe168d049d0, ev: 0x7fe168d049d0
[TRACE][4603467200][3][../mt_core.cpp][325 ][DelRef    ]fd: 4, events: 0
[TRACE][4603467200][3][../mt_core.cpp][212 ][AddEventer]AddEventer old_ev: 0x7fe168d049d0, ev: 0x7fe168d049d0
[TRACE][4603467200][3][../mt_core.cpp][139 ][AddList   ]ev add success ev: 0x7fe168d049d0, fd: 4
[DEBUG][4603467200][3][../include/mt_heap.h][138 ][HeapPush  ]index : 1
[TRACE][4603467200][3][../include/mt_frame.h][192 ][ThreadSchedule]thread: 0x7fe168d03980, m_run_list_ size: 0, m_io_list_ size: 1, m_pend_list_ size: 0
[TRACE][4603467200][3][../include/mt_frame.h][193 ][ThreadSchedule]SetActiveThread thread: 0x7fe168d03980
[TRACE][4603467200][4][../include/mt_frame.h][375 ][SetActiveThread]SetActiveThread : 0x7fe168d03980
[TRACE][4603467200][4][../mt_thread.cpp][262 ][RestoreContext]this : 0x7fe168d03980, switch_thread : 0x7fe168d03530
[TRACE][4603467200][4][../mt_thread.cpp][269 ][RestoreContext]================= run thread =================[0x7fe168d03980]
[TRACE][4603467200][4][../mt_thread.cpp][273 ][RestoreContext]contextswitch: (0x7fe168d03530,0x7fe168d03608) -> (0x7fe168d03980,0x7fe168d03a58)
[TRACE][4603467200][4][../mt_thread.cpp][23  ][StartActiveThread]StartActiveThread: 0x7fe168d03980, t: 0x7fe168d03a40, id: 4
[TRACE][4603467200][4][../mt_thread.cpp][282 ][Run       ]Run begin......
[TRACE][4603467200][4][../mt_action.cpp][745 ][NewThread ]action : 0x7fe168e00150
[TRACE][4603467200][4][../mt_connection.cpp][201 ][CreateSocket]set fd : 5
[TRACE][4603467200][4][../mt_connection.cpp][223 ][CreateSocket]m_ev_ : 0x7fe168e00420
[DEBUG][4603467200][4][../mt_action.cpp][761 ][NewThread ]timeout: 100000
[TRACE][4603467200][4][../include/mt_frame.h][759 ][recv      ]now time: 1540891581172, start time: 1540891581172
[TRACE][4603467200][4][../mt_core.cpp][212 ][AddEventer]AddEventer old_ev: 0x0, ev: 0x7fe168e00480
[TRACE][4603467200][4][../mt_core.cpp][301 ][AddFd     ]fd : 5, events: 1
[TRACE][4603467200][4][../mt_core.cpp][139 ][AddList   ]ev add success ev: 0x7fe168e00480, fd: 5
[DEBUG][4603467200][4][../include/mt_heap.h][138 ][HeapPush  ]index : 2
[TRACE][4603467200][4][../include/mt_frame.h][184 ][ThreadSchedule]DaemonThread
[TRACE][4603467200][4][../include/mt_frame.h][192 ][ThreadSchedule]thread: 0x7fe168d030e0, m_run_list_ size: 0, m_io_list_ size: 2, m_pend_list_ size: 0
[TRACE][4603467200][4][../include/mt_frame.h][193 ][ThreadSchedule]SetActiveThread thread: 0x7fe168d030e0
[TRACE][4603467200][2][../include/mt_frame.h][375 ][SetActiveThread]SetActiveThread : 0x7fe168d030e0
[TRACE][4603467200][2][../mt_thread.cpp][262 ][RestoreContext]this : 0x7fe168d030e0, switch_thread : 0x7fe168d03980
[TRACE][4603467200][2][../mt_thread.cpp][269 ][RestoreContext]================= run thread =================[0x7fe168d030e0]
[TRACE][4603467200][2][../mt_thread.cpp][273 ][RestoreContext]contextswitch: (0x7fe168d03980,0x7fe168d03a58) -> (0x7fe168d030e0,0x7fe168d031b8)
[TRACE][4603467200][2][../mt_thread.cpp][277 ][RestoreContext]Thread Dispatch ...[0x7fe168d03530]
[TRACE][4603467200][2][../include/mt_frame.h][1003][DaemonRun ]iosize: 2, pendsize: 0, runsize: 0, sleepsize: 2
[TRACE][4603467200][2][../mt_core.cpp][403 ][Dispatch  ]wait_time: 0 ms
[TRACE][4603467200][2][../include/mt_event_kqueue.h][155 ][ApiPoll   ]retval: 1, tvp: 0x0, m_events_: 0x10d190000, m_size_: 50000
[TRACE][4603467200][2][../include/mt_event_kqueue.h][171 ][ApiPoll   ]m_fired_[j].fd : 5, mask : 1
[TRACE][4603467200][2][../mt_core.cpp][419 ][Dispatch  ]wait poll nfd: 1
[TRACE][4603467200][2][../mt_core.cpp][14  ][InputNotify]InputNotify ..., thread : 0x7fe168d03980
[TRACE][4603467200][2][../include/mt_frame.h][215 ][RemoveIoWait]remove thread: 0x7fe168d03980, m_io_list_ size: 2
[TRACE][4603467200][2][../mt_core.cpp][379 ][DisposeEventerList]ST_READABLE osfd: 5, ret: 0 ev_fdnum: 1
[TRACE][4603467200][2][../include/mt_frame.h][989 ][DaemonRun ]system ms: 1540891581172
[TRACE][4603467200][2][../include/mt_frame.h][352 ][WakeupTimeout]thread GetWakeupTime: 100000
[TRACE][4603467200][2][../include/mt_frame.h][215 ][RemoveIoWait]remove thread: 0x7fe168d03530, m_io_list_ size: 1
[TRACE][4603467200][2][../include/mt_frame.h][323 ][CheckExpired]m_timer_ : 0x7fe168d04670
[TRACE][4603467200][2][../include/mt_heap_timer.h][104 ][CheckExpired]before : now_ms = 1540891581172, size = 0
[TRACE][4603467200][2][../include/mt_heap_timer.h][112 ][CheckExpired]after : size = 0
[TRACE][4603467200][2][../include/mt_frame.h][192 ][ThreadSchedule]thread: 0x7fe168d03980, m_run_list_ size: 1, m_io_list_ size: 0, m_pend_list_ size: 0
[TRACE][4603467200][2][../include/mt_frame.h][193 ][ThreadSchedule]SetActiveThread thread: 0x7fe168d03980
[TRACE][4603467200][4][../include/mt_frame.h][375 ][SetActiveThread]SetActiveThread : 0x7fe168d03980
[TRACE][4603467200][4][../mt_thread.cpp][262 ][RestoreContext]this : 0x7fe168d03980, switch_thread : 0x7fe168d030e0
[TRACE][4603467200][4][../mt_thread.cpp][269 ][RestoreContext]================= run thread =================[0x7fe168d03980]
[TRACE][4603467200][4][../mt_thread.cpp][273 ][RestoreContext]contextswitch: (0x7fe168d030e0,0x7fe168d031b8) -> (0x7fe168d03980,0x7fe168d03a58)
[TRACE][4603467200][4][../mt_thread.cpp][277 ][RestoreContext]Thread Dispatch ...[0x7fe168d030e0]
[TRACE][4603467200][4][../mt_core.cpp][461 ][Schedule  ]thread: 0x7fe168d03980
[TRACE][4603467200][4][../mt_core.cpp][468 ][Schedule  ]GetRecvEvents: 1, GetEvents: 1, fd: 5
[TRACE][4603467200][4][../mt_core.cpp][267 ][DelEventer]DelEventer old_ev: 0x7fe168e00480, ev: 0x7fe168e00480
[TRACE][4603467200][4][../mt_core.cpp][325 ][DelRef    ]fd: 5, events: 0
[TRACE][4603467200][4][../mt_core.cpp][483 ][Schedule  ]recv_num: 1
[TRACE][4603467200][4][../mt_sys_hook.cpp][231 ][mt_recv   ]system func : recv
[TRACE][4603467200][4][../include/mt_frame.h][787 ][recv      ]recv return n: 78, buf: GET / HTTP/1.1
Host: 127.0.0.1:4312
User-Agent: curl/7.54.0
Accept: */*

, fd: 5, len: 8200, flags: 0
[DEBUG][4603467200][4][mt_server_unittest.cpp][56  ][HandleInput][recv] buf : GET / HTTP/1.1
Host: 127.0.0.1:4312
User-Agent: curl/7.54.0
Accept: */*


[DEBUG][4603467200][4][../mt_action.cpp][770 ][NewThread ]Recvfrom ...
[TRACE][4603467200][4][../mt_sys_hook.cpp][253 ][mt_send   ]system func : send
[TRACE][4603467200][4][../include/mt_frame.h][835 ][send      ]send fd: 5, nbyte: 78, send_len: 0, flags: 0, n: 78
[TRACE][4603467200][4][../include/mt_frame.h][859 ][send      ]send_len : 78
[TRACE][4603467200][4][../mt_connection.cpp][253 ][SendData  ]send: GET / HTTP/1.1
Host: 127.0.0.1:4312
User-Agent: curl/7.54.0
Accept: */*


[DEBUG][4603467200][4][../mt_action.cpp][280 ][Sendto    ]ret: 78
[DEBUG][4603467200][4][../mt_action.cpp][779 ][NewThread ]Sendto ...
[TRACE][4603467200][4][../mt_thread.cpp][294 ][Run       ]Run end......
[TRACE][4603467200][4][../include/mt_frame.h][192 ][ThreadSchedule]thread: 0x7fe168d03530, m_run_list_ size: 0, m_io_list_ size: 0, m_pend_list_ size: 0
[TRACE][4603467200][4][../include/mt_frame.h][193 ][ThreadSchedule]SetActiveThread thread: 0x7fe168d03530
[TRACE][4603467200][3][../include/mt_frame.h][375 ][SetActiveThread]SetActiveThread : 0x7fe168d03530
[TRACE][4603467200][3][../mt_thread.cpp][262 ][RestoreContext]this : 0x7fe168d03530, switch_thread : 0x7fe168d03980
[TRACE][4603467200][3][../mt_thread